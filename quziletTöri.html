<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Történelmi Fogalmak - Flashcard Alkalmazás</title>
    <style>
        /* Általános beállítások */
body {
    font-family: Arial, sans-serif;
    background-color: #1e294a;
    color: #ffffff;
    margin: 0;
    padding: 0;
}

.container {
    max-width: 800px;
    margin: 50px auto;
    padding: 20px;
    background-color: #2c3e50;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

/* Cím stílusa */
h1 {
    text-align: center;
    margin-bottom: 20px;
}


/* Definíció szöveg */
#definitionText {
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 30px;
}

/* Opciók konténer */
#optionsContainer {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

/* Opció gombok */
.optionBtn {
    padding: 15px 20px;
    background-color: #34495e;
    color: #ffffff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    text-align: center;
    transition: background-color 0.3s ease, transform 0.2s ease-in-out;
}

.optionBtn:hover {
    background-color: #1abc9c; /* Hover szín */
    transform: scale(1.05); /* Kicsit nagyobb méret hover esetén */
}

.optionBtn.correct {
    background-color: #27ae60; /* Helyes válasz színe */
}

.optionBtn.incorrect {
    background-color: #e74c3c; /* Helytelen válasz színe */
}

/* "Nem tudom" gomb */
#dontKnowBtn {
    display: block;
    margin: 20px auto 0 auto;
    padding: 10px 15px;
    background-color: transparent;
    color: #1abc9c; /* Zöld szín */
    border: none;
    font-size: 16px;
    cursor: pointer;
}

#dontKnowBtn:hover {
    text-decoration: underline; /* Hover alatt aláhúzás */
}

/* Módváltó gombok */
.mode-controls {
    display: flex;
    justify-content: center;
    margin-top: 30px;
}

.mode-controls button {
    padding: 10px 20px;
    margin-right: 10px;
    background-color: #34495e; /* Alapértelmezett szín */
    color: white;
    border-radius: 5px;
    border: none;
}

.mode-controls button.active {
    background-color: #1abc9c; /* Aktív mód színe */
}

.mode-controls button:hover {
    background-color: #16a085; /* Hover szín */
}
/* Opció gombok */
.optionBtn {
    padding: 15px 20px;
    background-color: #34495e;
    color: #ffffff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    text-align: center;
    transition: background-color 0.3s ease, transform 0.2s ease-in-out, border 0.3s ease;
}

.optionBtn:hover {
    background-color: #1abc9c; /* Hover szín */
}

.optionBtn.correct {
    background-color: #27ae60; /* Helyes válasz színe */
    border: 2px solid #2ecc71; /* Zöld keret */
}

.optionBtn.incorrect {
    background-color: #e74c3c; /* Helytelen válasz színe */
    border: 2px solid #c0392b; /* Piros keret */
}

#feedbackMessage {
    margin-top: 20px;
    font-size: 18px;
}
/* Következő gomb stílusa */
#nextQuestionBtn {
    display: none; /* Alapértelmezetten rejtett */
    margin: 20px auto 0 auto;
    padding: 10px 20px;
    background-color: #1abc9c; /* Zöld szín */
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

#nextQuestionBtn:hover {
    background-color: #16a085; /* Sötétebb zöld hover esetén */
}

/* Visszajelzés terület */
#feedbackArea {
    margin-top: 20px;
    text-align: center;
    min-height: 30px;
}

#feedbackMessage {
    font-size: 18px;
    font-weight: bold;
}
/* "Nézzük meg újra" felirat stílusa */
.review-label {
    display: inline-block;
    background-color: #e74c3c;
    color: white;
    padding: 3px 8px;
    border-radius: 4px;
    margin-right: 10px;
    font-size: 14px;
    font-weight: bold;
}
.review-title {
    color: #e67e22;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 15px;
    padding: 5px;
    background-color: rgba(230, 126, 34, 0.1);
    border-radius: 5px;
}

    </style>
</head>
<body>
    <div class="container">
        <h1>Történelmi Fogalmak</h1>

        <!-- Tanulás felület -->
        <div id="studyContainer">
            <p id="definitionText">Definíció itt jelenik meg...</p>
            <div id="optionsContainer">
                <!-- Válaszlehetőségek -->
                <button class="optionBtn" data-index="0"></button>
                <button class="optionBtn" data-index="1"></button>
                <button class="optionBtn" data-index="2"></button>
                <button class="optionBtn" data-index="3"></button>
            </div>
            <div id="feedbackArea"></div>
            <button id="dontKnowBtn">Nem tudom</button>
            <!-- Új következő gomb -->
            <button id="nextQuestionBtn" style="display: none;">Következő kérdés</button>
        </div>

        <!-- Teszt felület -->
        <div id="testContainer" class="hidden">
            <!-- Teszt mód kódja... -->
        </div>

        <!-- Módváltó gombok -->
        <div class="mode-controls">
            <button id="studyModeBtn" class="active">Tanulás</button>
            <button id="testModeBtn">Teszt</button>
        </div>
    </div>
    
    <script>
        // Flashcard adatok
        const flashcards = [
    { term: "Apostle", definition: "an early follower of Jesus" },
    { term: "Olympia", definition: "A major Panhellenic religious sanctuary of ancient Greece, where the ancient Olympic Games were held every four years throughout Classical antiquity, from the 8th century BC to the 4th century AD." },
    { term: "Polis", definition: "A city-state in ancient Greece." },
    { term: "city-state (polis)", definition: "Self-governing city surrounded by its territory." },
    { term: "Phalanx", definition: "a group of armed foot soldiers in ancient Greece, arranged close together in rows, carrying shields" },
    { term: "Aristocracy", definition: "landholding elite" },
    { term: "demos", definition: "the people, the citizens" },
    { term: "Greek Democracy", definition: "In Greek society all male citizens could vote on how they wanted things to be run" },
    { term: "assembly", definition: "a group of citizens, in an ancient Greek democracy, with the power to pass laws" },
    { term: "Strategos (strategoi - plural)", definition: "military general" },
    { term: "Ostracism", definition: "exclusion from a society or group with the help of tiles" },
    { term: "oracle", definition: "a sacred shrine where a priest or priestess spoke for a god or goddess to predict the future" },
    { term: "Cleisthenes", definition: "An aristocrat, created a council of 500 and helped from Athenian democracy" },
    { term: "Pericles", definition: "Athenian leader noted for advancing democracy in Athens and for ordering the construction of the Parthenon." },
    { term: "508 BC", definition: "Cleisthenes' reforms; democracy began in Athens" },
    { term: "490 BC", definition: "First Greco-Persian War (Marathon)" },
    { term: "Herodotus", definition: "Greek Historian, considered the father of History. He came from a Greek community in Anatolia and traveled extensively, collecting information in western Asia and the Mediterranean lands." },
    { term: "Plato", definition: "(430-347 BCE) Was a disciple of Socrates whose cornerstone of thought was his theory of Forms, in which there was another world of perfection." },
    { term: "Aristotle", definition: "A Greek Philosopher, taught Alexander the Great, started a famous school, studied with Plato" },
    { term: "Alexander the Great", definition: "son of Philip II; received military training in Macedonian army and was a student of Aristotle; great leader; conquered much land in Asia Minor, Syria, Egypt, and Mesopotamia; goal was to conquer the known world" },
    { term: "776 BC", definition: "first Olympic games recorded in history" },
    { term: "5th century BCE", definition: "Greek Golden Age" },
    { term: "Olympic Games", definition: "in ancient Greece, an athletic competition held every four years in honor of Zeus" },
    { term: "Athens", definition: "A democratic Greek polis who accomplished many cultural achievements, and who were constantly at war with Sparta." },
    { term: "Acropolis of Athens", definition: "Both the fortified citadel and state sanctuary of the ancient city of Athens" },
    { term: "Alexandria", definition: "City on the Mediterranean coast of Egypt founded by Alexander. It became the capital of the Hellenistic kingdom of Ptolemy. It contained the famous Library and the Museum and was a center for leading scientific and literary figures in the classical and postclassical eras." },
    { term: "amphitheater", definition: "an oval large stadium with tiers of seats" },
    { term: "Monotheism", definition: "belief in only one god" },
    { term: "Jewish religion", definition: "The religion, philosophy, and way of life of the Jewish people. It is considered by religious Jews to be the expression of the covenantal relationship God developed with the Children of Israel. God revealed his laws and commandments to Moses on Mount Sinai in the form of both the Written and Oral Torah" },
    { term: "Old Testament", definition: "The forty-six books of the Bible that record the history of salvation from Creation until the time of Christ." },
    { term: "10 Commandments/Decalogue", definition: "Laws God gives to Moses for the chosen people; applies to everyone; embodies natural law" },
    { term: "Prophet", definition: "a person regarded as an inspired teacher or proclaimer of the will of God." },
    { term: "Temple of Jerusalem", definition: "A central place of worship for Jewish adherents. Built by Solomon." },
    { term: "Diaspora", definition: "Jews living outside Israel" },
    { term: "Messiah", definition: "Savior sent by God; anointed one" },
    { term: "Christian religion", definition: "It is the most widely practiced religion in the world. The Christian faith centers on beliefs regarding the birth, life, death and resurrection of Jesus Christ. It started with a small group of adherents." },
    { term: "Baptism", definition: "Sacrament by which God cleanses all sin, and one becomes a member of the church." },
    { term: "Holy Communion (Eucharist)", definition: "when Christians eat bread and drink wine to remember Jesus and what He did for us (see 1 Corinthians 11:23-34)" },
    { term: "mission", definition: "a special duty or function which a person or group is sent out to spread Christianity" },
    { term: "Bible", definition: "The holy book of Christianity" },
    { term: "New Testament", definition: "The twenty-seven books of the Bible written in apostolic times, which have the life, teachings, Passion, death, Resurrection, and Ascension of Jesus Christ and the beginnings of the Church as their central theme." },
    { term: "Gospel", definition: "The \"Good News,\" the story of the coming of the Savior, Jesus Christ, and the inauguration of God's Kingdom." },
    { term: "Bishop", definition: "A church official who leads a large group of Christians in a particular region" },
    { term: "Synod", definition: "a council, especially of churches or church officials" },
    { term: "Abraham", definition: "Founder of Judaism who, according to the Bible, led his family from Ur to Canaan in obedience to God's command." },
    { term: "Moses", definition: "(Old Testament) the Hebrew prophet who led the Israelites from Egypt across the Red sea on a journey known as the Exodus" },
    { term: "Jesus", definition: "founder of Christianity; believed by his followers to be the Messiah" },
    { term: "Saint Peter", definition: "Early leader of the Christian church; one of Jesus's twelve apostles; also known as Simon Peter, the first pope of the Catholic Church" },
    { term: "Saint Paul", definition: "The first great popularizer of Christianity (10-65 C.E.)." },
    { term: "Constantine the Great", definition: "Emperor of Rome who adopted the Christian faith and stopped the persecution of Christians (280-337)" },
    { term: "313 AD", definition: "Edict of Milan" },
    { term: "325 AD", definition: "Council of Nicaea" },
    { term: "Jerusalem", definition: "A city in the Holy Land, regarded as sacred by Christians, Muslims, and Jews." },
    { term: "Canaan", definition: "Ancient home of the Hebrews, the promised land" },
    { term: "Judea", definition: "The land in the eastern Mediterranean region populated by Jews at the time of the Roman Empire" },
    { term: "Israel", definition: "an ancient kingdom of the Hebrew tribes at the southeastern end of the Mediterranean Sea" },
    { term: "Palestine", definition: "Also called Holy Land. Biblical name, Canaan. An ancient country in SW Asia, on the E coast of the Mediterranean." },
    { term: "Bethlehem", definition: "Birthplace of Jesus" }
]

// Flashcard adatok
// Ide kerülne a flashcards tömb a fogalmakkal és definíciókkal

// Alkalmazás változók
let currentIndex = 0;
let isTestMode = false;
let currentTestIndex = 0;
let testOrder = [];
let incorrectAnswers = []; // Hibás válaszok tárolása
let questionCounter = 0; // Kérdésszámláló
let isReviewMode = false; // Jelzi, hogy ismétlési módban vagyunk-e
let reviewCounter = 0; // Aktuális ismétlési kérdés száma

// DOM elemek
const studyContainer = document.getElementById('studyContainer');
const testContainer = document.getElementById('testContainer');
const definitionText = document.getElementById('definitionText');
const optionsContainer = document.getElementById('optionsContainer');
const dontKnowBtn = document.getElementById('dontKnowBtn');
const nextQuestionBtn = document.getElementById('nextQuestionBtn');
const feedbackArea = document.getElementById('feedbackArea');
const studyModeBtn = document.getElementById('studyModeBtn');
const testModeBtn = document.getElementById('testModeBtn');
const questionTermElement = document.getElementById('questionTerm');
const answerInput = document.getElementById('answerInput');
const checkAnswerBtn = document.getElementById('checkAnswerBtn');
const resultContainer = document.getElementById('resultContainer');
const resultTextElement = document.getElementById('resultText');
const correctAnswerElement = document.getElementById('correctAnswer');
const testNextQuestionBtn = document.getElementById('testNextQuestionBtn');

// Inicializálás
function initApp() {
    console.log("Alkalmazás inicializálása");
    
    // Eseménykezelők hozzáadása
    studyModeBtn.addEventListener('click', switchToStudyMode);
    testModeBtn.addEventListener('click', switchToTestMode);
    nextQuestionBtn.addEventListener('click', handleNextQuestion);
    dontKnowBtn.addEventListener('click', handleDontKnow);
    checkAnswerBtn.addEventListener('click', checkAnswer);
    testNextQuestionBtn.addEventListener('click', nextTestQuestion);
    
    // Alapértelmezetten tanulás mód
    switchToStudyMode();
}

// Következő kérdés kezelése (új)
function handleNextQuestion() {
    if (isReviewMode) {
        showNextReviewQuestion();
    } else {
        // Növeljük a kérdésszámlálót
        questionCounter++;
        
        // 5 kérdésenként ellenőrizzük, hogy van-e ismétlendő kérdés
        if (questionCounter % 5 === 0 && incorrectAnswers.length > 0) {
            startReviewSession();
        } else {
            generateStudyQuestion();
        }
    }
}

// Ismétlési mód indítása (új)
function startReviewSession() {
    console.log("Ismétlési mód indítása");
    isReviewMode = true;
    reviewCounter = 0;
    
    // Keverés az ismétlési kérdésekhez
    shuffleArray(incorrectAnswers);
    
    // Megjeleníti az első ismétlési kérdést
    showNextReviewQuestion();
}

// Következő ismétlési kérdés mutatása (új)
function showNextReviewQuestion() {
    // Ha minden ismétlési kérdés végigért, visszatérünk a normál módhoz
    if (reviewCounter >= incorrectAnswers.length) {
        isReviewMode = false;
        incorrectAnswers = []; // Töröljük a hibás válaszokat, hiszen végigmentünk rajtuk
        generateStudyQuestion();
        return;
    }
    
    // Visszajelzés terület tisztítása
    feedbackArea.innerHTML = '';
    
    // Következő gomb elrejtése
    nextQuestionBtn.style.display = 'none';
    
    // Aktuális ismétlési kérdés beállítása
    currentIndex = incorrectAnswers[reviewCounter].index;
    const correctAnswer = flashcards[currentIndex].term;
    
    // "Nézzük meg újra" felirat létrehozása
    const reviewTitle = document.createElement('div');
    reviewTitle.id = 'reviewTitle';
    reviewTitle.textContent = "Nézzük meg újra";
    reviewTitle.className = 'review-title';
    feedbackArea.appendChild(reviewTitle);

    // Véletlenszerű válaszlehetőségek generálása
    const options = [correctAnswer];
    while (options.length < 4) {
        const randomTerm = flashcards[Math.floor(Math.random() * flashcards.length)].term;
        if (!options.includes(randomTerm)) {
            options.push(randomTerm);
        }
    }

    // Válaszlehetőségek keverése
    shuffleArray(options);

    // Definíció megjelenítése
    definitionText.textContent = flashcards[currentIndex].definition;

    // Válaszlehetőségek megjelenítése
    const optionButtons = document.querySelectorAll('.optionBtn');
    optionButtons.forEach((btn, index) => {
        btn.textContent = options[index];
        btn.dataset.correct = options[index] === correctAnswer ? 'true' : 'false';
        btn.className = 'optionBtn'; // Reseteljük az osztályokat
        btn.disabled = false; // Engedélyezzük a gombokat
        
        // Eseménykezelők tisztítása és újra hozzáadása
        btn.removeEventListener('click', handleOptionClick);
        btn.addEventListener('click', handleReviewOptionClick);
    });
    
    // "Nem tudom" gomb engedélyezése
    dontKnowBtn.disabled = false;
    
    // Növeljük az ismétlési számlálót
    reviewCounter++;
}

// Ismétlési opció kezelése (új)
function handleReviewOptionClick(event) {
    const isCorrect = event.target.dataset.correct === 'true';
    const optionButtons = document.querySelectorAll('.optionBtn');

    // Minden gombot letiltunk
    optionButtons.forEach(btn => {
        btn.disabled = true;
        if (btn.dataset.correct === 'true') {
            btn.classList.add('correct'); // Helyes válasz kiemelése
        } else if (btn === event.target && !isCorrect) {
            btn.classList.add('incorrect'); // Helytelen válasz kiemelése
        }
    });
    
    // "Nem tudom" gomb letiltása
    dontKnowBtn.disabled = true;

    // Üzenet megjelenítése
    const feedbackMessage = document.createElement('p');
    feedbackMessage.id = 'feedbackMessage';
    
    if (isCorrect) {
        feedbackMessage.textContent = "Great job! You got it right this time!";
        feedbackMessage.style.color = '#27ae60';
    } else {
        feedbackMessage.textContent = "Keep practicing, you'll get it next time!";
        feedbackMessage.style.color = '#e74c3c';
        
        // Ha ismét helytelenül válaszolt, hagyjuk benne a hibás válaszok között
        const wrongAnswer = {
            index: currentIndex,
            term: flashcards[currentIndex].term,
            definition: flashcards[currentIndex].definition
        };
        incorrectAnswers.push(wrongAnswer);
    }
    
    feedbackArea.appendChild(feedbackMessage);

    // Következő gomb megjelenítése
    nextQuestionBtn.style.display = 'block';
}

// Véletlenszerű kérdés generálása tanulás módban
function generateStudyQuestion() {
    // Visszajelzés terület tisztítása
    feedbackArea.innerHTML = '';
    
    // Következő gomb elrejtése
    nextQuestionBtn.style.display = 'none';
    
    // Véletlenszerűen kiválasztunk egy fogalmat
    currentIndex = Math.floor(Math.random() * flashcards.length);
    const correctAnswer = flashcards[currentIndex].term;

    // Véletlenszerű válaszlehetőségek generálása
    const options = [correctAnswer];
    while (options.length < 4) {
        const randomTerm = flashcards[Math.floor(Math.random() * flashcards.length)].term;
        if (!options.includes(randomTerm)) {
            options.push(randomTerm);
        }
    }

    // Válaszlehetőségek keverése
    shuffleArray(options);

    // Definíció megjelenítése
    definitionText.textContent = flashcards[currentIndex].definition;

    // Válaszlehetőségek megjelenítése
    const optionButtons = document.querySelectorAll('.optionBtn');
    optionButtons.forEach((btn, index) => {
        btn.textContent = options[index];
        btn.dataset.correct = options[index] === correctAnswer ? 'true' : 'false';
        btn.className = 'optionBtn'; // Reseteljük az osztályokat
        btn.disabled = false; // Engedélyezzük a gombokat
        
        // Eseménykezelők tisztítása és újra hozzáadása
        btn.removeEventListener('click', handleReviewOptionClick);
        btn.addEventListener('click', handleOptionClick);
    });
    
    // "Nem tudom" gomb engedélyezése
    dontKnowBtn.disabled = false;
}

// Válaszlehetőség kezelése - MÓDOSÍTVA a hibás válaszok rögzítéséhez
function handleOptionClick(event) {
    const isCorrect = event.target.dataset.correct === 'true';
    const optionButtons = document.querySelectorAll('.optionBtn');

    // Minden gombot letiltunk
    optionButtons.forEach(btn => {
        btn.disabled = true;
        if (btn.dataset.correct === 'true') {
            btn.classList.add('correct'); // Helyes válasz kiemelése
        } else if (btn === event.target && !isCorrect) {
            btn.classList.add('incorrect'); // Helytelen válasz kiemelése
            
            // Hibás válasz rögzítése
            const wrongAnswer = {
                index: currentIndex,
                term: flashcards[currentIndex].term,
                definition: flashcards[currentIndex].definition
            };
            incorrectAnswers.push(wrongAnswer);
        }
    });
    
    // "Nem tudom" gomb letiltása
    dontKnowBtn.disabled = true;

    // Üzenet megjelenítése
    const feedbackMessage = document.createElement('p');
    feedbackMessage.id = 'feedbackMessage';
    feedbackMessage.textContent = isCorrect 
        ? "Great job! You got it right!" 
        : "No sweat, you're still learning!";
    feedbackMessage.style.color = isCorrect ? '#27ae60' : '#e74c3c';
    feedbackArea.appendChild(feedbackMessage);

    // Következő gomb megjelenítése
    nextQuestionBtn.style.display = 'block';
}

// "Nem tudom" gomb kezelése - MÓDOSÍTVA a hibás válaszok rögzítéséhez
function handleDontKnow() {
    const optionButtons = document.querySelectorAll('.optionBtn');
    
    // Minden gombot letiltunk
    optionButtons.forEach(btn => {
        btn.disabled = true;
        if (btn.dataset.correct === 'true') {
            btn.classList.add('correct'); // Helyes válasz kiemelése
        }
    });
    
    // "Nem tudom" gomb letiltása
    dontKnowBtn.disabled = true;
    
    // Hibás válasz rögzítése
    if (!isReviewMode) {
        const wrongAnswer = {
            index: currentIndex,
            term: flashcards[currentIndex].term,
            definition: flashcards[currentIndex].definition
        };
        incorrectAnswers.push(wrongAnswer);
    }
    
    // Üzenet megjelenítése
    const feedbackMessage = document.createElement('p');
    feedbackMessage.id = 'feedbackMessage';
    feedbackMessage.textContent = `A helyes válasz: ${flashcards[currentIndex].term}`;
    feedbackMessage.style.color = '#3498db'; // Kék szín a "Nem tudom" esetén
    feedbackArea.appendChild(feedbackMessage);
    
    // Következő gomb megjelenítése
    nextQuestionBtn.style.display = 'block';
}

// Módváltás tanulás módra
function switchToStudyMode() {
    console.log("Váltás tanulás módra");
    
    // Állítsuk be a módot
    isTestMode = false;
    isReviewMode = false;
    questionCounter = 0;
    incorrectAnswers = [];
    
    // Gombok állapota
    studyModeBtn.classList.add('active');
    testModeBtn.classList.remove('active');
    
    // Konténerek láthatósága
    studyContainer.style.display = 'block';
    testContainer.style.display = 'none';
    
    // Tanulás kérdés generálása
    generateStudyQuestion();
    
    console.log("Tanulás mód beállítva");
}

// Módváltás teszt módra
function switchToTestMode() {
    console.log("Váltás teszt módra");
    
    // Állítsuk be a módot
    isTestMode = true;
    
    // Gombok állapota
    studyModeBtn.classList.remove('active');
    testModeBtn.classList.add('active');
    
    // Konténerek láthatósága
    studyContainer.style.display = 'none';
    testContainer.style.display = 'block';
    
    // Teszt inicializálása
    initializeTest();
    
    console.log("Teszt mód beállítva");
}

// Teszt inicializálása
function initializeTest() {
    testOrder = [...Array(flashcards.length).keys()];
    
    // Teszt sorrend keverése
    for (let i = testOrder.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [testOrder[i], testOrder[j]] = [testOrder[j], testOrder[i]];
    }
    
    currentTestIndex = 0;
    showQuestion();
}

// Kérdés megjelenítése teszt módban
function showQuestion() {
    const index = testOrder[currentTestIndex];
    questionTermElement.textContent = flashcards[index].term;
    answerInput.value = '';
    
    resultContainer.style.display = 'none';
    document.getElementById('questionContainer').style.display = 'block';
}

// Válasz ellenőrzése teszt módban
function checkAnswer() {
    const index = testOrder[currentTestIndex];
    const userAnswer = answerInput.value.trim().toLowerCase();
    const correctAnswer = flashcards[index].definition.toLowerCase();
    
    // Intelligens ellenőrzés
    const isCorrect = userAnswer.length > 0 && correctAnswer.includes(userAnswer) || 
                     userAnswer.length > 10 && similarity(userAnswer, correctAnswer) > 0.5;
    
    document.getElementById('questionContainer').style.display = 'none';
    resultContainer.style.display = 'block';
    
    if (isCorrect) {
        resultContainer.classList.add('correct');
        resultContainer.classList.remove('incorrect');
        resultTextElement.textContent = "Helyes válasz!";
        correctAnswerElement.textContent = "";
    } else {
        resultContainer.classList.add('incorrect');
        resultContainer.classList.remove('correct');
        resultTextElement.textContent = "Helytelen válasz!";
        correctAnswerElement.textContent = `A helyes válasz: ${flashcards[index].definition}`;
    }
}

// Következő teszt kérdés
function nextTestQuestion() {
    currentTestIndex++;
    if (currentTestIndex >= flashcards.length) {
        // Teszt vége
        resultContainer.style.display = 'none';
        alert('Gratuláció! Végeztél az összes kérdéssel!');
        switchToStudyMode();
    } else {
        showQuestion();
    }
}

// Szöveg hasonlóság kiszámítása (Levenshtein távolság)
function similarity(s1, s2) {
    let longer = s1;
    let shorter = s2;
    if (s1.length < s2.length) {
        longer = s2;
        shorter = s1;
    }
    let longerLength = longer.length;
    if (longerLength == 0) {
        return 1.0;
    }
    return (longerLength - levenshteinDistance(longer, shorter)) / parseFloat(longerLength);
}

function levenshteinDistance(s1, s2) {
    s1 = s1.toLowerCase();
    s2 = s2.toLowerCase();

    let costs = new Array();
    for (let i = 0; i <= s1.length; i++) {
        let lastValue = i;
        for (let j = 0; j <= s2.length; j++) {
            if (i == 0)
                costs[j] = j;
            else {
                if (j > 0) {
                    let newValue = costs[j - 1];
                    if (s1.charAt(i - 1) != s2.charAt(j - 1))
                        newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
                    costs[j - 1] = lastValue;
                    lastValue = newValue;
                }
            }
        }
        if (i > 0)
            costs[s2.length] = lastValue;
    }
    return costs[s2.length];
}

// Segédfüggvény: Tömb keverése (Fisher-Yates algoritmus)
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// Alkalmazás indítása
window.onload = initApp;


    </script>
</body>
</html>
