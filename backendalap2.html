<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>HTTP & API Kv√≠z - NorszStudy</title>

  <script>
    (function () {
      try {
        var saved = localStorage.getItem('theme');
        var root = document.documentElement;
        if (saved === 'light' || saved === 'dark') {
          root.setAttribute('data-theme', saved);
        } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          root.setAttribute('data-theme', 'dark');
        } else {
          root.setAttribute('data-theme', 'light');
        }
      } catch (e) {}
    })();
  </script>

  <style>
    :root {
      color-scheme: light dark;
      --bg: #f8fafc;
      --bg-secondary: #f1f5f9;
      --surface: #ffffff;
      --surface-hover: #f8fafc;
      --text: #0f172a;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --primary: #3b82f6;
      --primary-hover: #2563eb;
      --correct: #10b981;
      --correct-bg: #d1fae5;
      --incorrect: #ef4444;
      --incorrect-bg: #fee2e2;
      --shadow: rgba(15, 23, 42, 0.08);
    }

    [data-theme="dark"] {
      --bg: #0f172a;
      --bg-secondary: #1e293b;
      --surface: #1e293b;
      --surface-hover: #334155;
      --text: #f1f5f9;
      --text-muted: #94a3b8;
      --border: #334155;
      --primary: #60a5fa;
      --primary-hover: #3b82f6;
      --correct: #34d399;
      --correct-bg: #065f46;
      --incorrect: #f87171;
      --incorrect-bg: #7f1d1d;
      --shadow: rgba(0, 0, 0, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    .header {
      background: var(--surface);
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 2px 8px var(--shadow);
      margin-bottom: 24px;
      text-align: center;
    }

    .header h1 {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .header h2 {
      font-size: 18px;
      font-weight: 500;
      color: var(--text-muted);
    }

    .progress-container {
      background: var(--surface);
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px var(--shadow);
      margin-bottom: 24px;
    }

    .progress-text {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 8px;
      text-align: center;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--bg-secondary);
      border-radius: 999px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--correct));
      border-radius: 999px;
      transition: width 0.4s ease;
    }

    .card {
      background: var(--surface);
      padding: 32px;
      border-radius: 16px;
      box-shadow: 0 2px 8px var(--shadow);
      margin-bottom: 24px;
    }

    .review-banner {
      background: linear-gradient(135deg, #f59e0b, #ea580c);
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      text-align: center;
      font-weight: 600;
      margin-bottom: 24px;
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
    }

    #definitionText {
      font-size: 20px;
      font-weight: 600;
      text-align: center;
      margin-bottom: 32px;
      line-height: 1.7;
      color: var(--text);
    }

    #optionsContainer {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 24px;
    }

    .optionBtn {
      display: flex;
      align-items: center;
      padding: 16px 20px;
      background: var(--bg-secondary);
      color: var(--text);
      border: 2px solid var(--border);
      border-radius: 12px;
      cursor: pointer;
      font-size: 16px;
      text-align: left;
      transition: all 0.2s ease;
      position: relative;
    }

    .optionBtn::before {
      content: attr(data-letter);
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 8px;
      margin-right: 16px;
      font-weight: 700;
      flex-shrink: 0;
      transition: all 0.2s ease;
    }

    .optionBtn:hover:not(:disabled) {
      background: var(--surface-hover);
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px var(--shadow);
    }

    .optionBtn:hover:not(:disabled)::before {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .optionBtn.correct {
      background: var(--correct-bg);
      border-color: var(--correct);
      color: var(--text);
    }

    .optionBtn.correct::before {
      background: var(--correct);
      border-color: var(--correct);
      color: white;
      content: "‚úì";
    }

    .optionBtn.incorrect {
      background: var(--incorrect-bg);
      border-color: var(--incorrect);
      color: var(--text);
    }

    .optionBtn.incorrect::before {
      background: var(--incorrect);
      border-color: var(--incorrect);
      color: white;
      content: "‚úó";
    }

    .optionBtn:disabled {
      cursor: not-allowed;
    }

    #feedbackArea {
      text-align: center;
      margin-bottom: 16px;
    }

    #feedbackMessage {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    #progressMessage {
      font-size: 16px;
      color: var(--text-muted);
    }

    .btn {
      width: 100%;
      padding: 14px 24px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .btn-secondary {
      background: transparent;
      color: var(--text-muted);
      margin-top: 12px;
    }

    .btn-secondary:hover {
      color: var(--text);
      background: var(--bg-secondary);
    }

    .mode-controls {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 24px;
    }

    .mode-controls button {
      padding: 12px 32px;
      background: var(--bg-secondary);
      color: var(--text);
      border: 2px solid var(--border);
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .mode-controls button.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .mode-controls button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px var(--shadow);
    }

    .completion-message {
      text-align: center;
      padding: 48px 24px;
    }

    .completion-message h2 {
      font-size: 32px;
      margin-bottom: 16px;
      color: var(--correct);
    }

    .completion-message p {
      font-size: 18px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    #restartBtn {
      margin-top: 24px;
    }

    .hidden {
      display: none !important;
    }

    @media (max-width: 640px) {
      .header h1 {
        font-size: 24px;
      }
      
      .header h2 {
        font-size: 16px;
      }

      #definitionText {
        font-size: 18px;
      }

      .card {
        padding: 24px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>HTTP & API Alapok</h1>
      <h2>Szerver-kliens kommunik√°ci√≥ √©s API tesztel√©s</h2>
    </div>

    <div class="progress-container">
      <div class="progress-text">
        <span id="learnedCount">0</span> / <span id="totalCount">0</span> fogalom
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
      </div>
    </div>

    <div id="studyContainer">
      <div class="card">
        <div id="reviewBanner"></div>
        <p id="definitionText">Defin√≠ci√≥ bet√∂lt√©se...</p>
        <div id="optionsContainer">
          <button class="optionBtn" data-index="0" data-letter="A"></button>
          <button class="optionBtn" data-index="1" data-letter="B"></button>
          <button class="optionBtn" data-index="2" data-letter="C"></button>
          <button class="optionBtn" data-index="3" data-letter="D"></button>
        </div>
        <div id="feedbackArea"></div>
        <button id="nextQuestionBtn" class="btn btn-primary hidden">K√∂vetkez≈ë k√©rd√©s</button>
        <button id="dontKnowBtn" class="btn btn-secondary">Nem tudom</button>
      </div>
    </div>

    <div class="mode-controls">
      <button id="studyModeBtn" class="active">Tanul√°s</button>
      <button id="testModeBtn">Teszt</button>
    </div>
  </div>

  <script>
    // HTTP & API kommunik√°ci√≥ flashcard adatok
    const flashcards = [
      { term: "Fogadja a k√©r√©seket, feldolgozza ≈ëket, majd v√°laszt k√ºld a kliensnek.", definition: "Mi a szerver szerepe a weben, √©s mit csin√°l, amikor egy k√©r√©s √©rkezik hozz√°?" },
      { term: "A kliens k√ºldi a k√©r√©seket √©s megjelen√≠ti a v√°laszokat, a szerver pedig feldolgozza a k√©r√©seket.", definition: "Mi a kliens szerepe, √©s miben k√ºl√∂nb√∂zik a szervert≈ël?" },
      { term: "Egy szabv√°nyos protokoll a kliens √©s a szerver k√∂z√∂tti kommunik√°ci√≥ra, az√©rt haszn√°ljuk, mert mindenki √°ltal ismert √©s kompatibilis.", definition: "Mi az az HTTP, √©s mi√©rt erre a szab√°lyrendszerre t√°maszkodik a b√∂ng√©sz≈ë √©s a szerver?" },
      { term: "Meghat√°rozza a k√©rd√©s t√≠pus√°t √©s c√©lj√°t, k√ºl√∂n c√©lra k√ºl√∂n met√≥dus illik.", definition: "Mire val√≥ egy HTTP met√≥dus, √©s mi√©rt nem mindegy, melyiket haszn√°ljuk?" },
      { term: "Adatok lek√©r√©se a szerverr≈ël m√≥dos√≠t√°s n√©lk√ºl.", definition: "Mi a GET k√©r√©s c√©lja a gyakorlatban?" },
      { term: "Adatok k√ºld√©se a szervernek valami l√©trehoz√°s√°hoz vagy feldolgoz√°s√°hoz.", definition: "Mi a POST k√©r√©s c√©lja a gyakorlatban?" },
      { term: "Egy konkr√©t el√©r√©si pont a szerveren, amelyhez k√©rv√©nyeket k√ºldhet√ºnk.", definition: "Mit jelent, hogy egy √∫tvonal endpoint vagy er≈ëforr√°s?" },
      { term: "Meghat√°rozza, hova k√ºldj√ºk a k√©rv√©nyeket, √°ltal√°ban protokoll, domain √©s √∫tvonal r√©szekb≈ël √°ll.", definition: "Mi a URL szerepe, √©s milyen f≈ë r√©szekb≈ël √°ll magas szinten?" },
      { term: "Sz√°mos eredm√©nyk√≥d, ami jelzi a k√©r√©s kimenetelr≈ël az √°llapotot a kliens fel√©.", definition: "Mit jelent az, hogy st√°tuszk√≥d, √©s mi√©rt fontos visszajelz√©s a kliensnek?" },
      { term: "A k√©r√©s sikeresen lefutott, a v√°lasz rendben √©rkezett.", definition: "Mit √ºzen sz√°modra a 200 OK st√°tuszk√≥d?" },
      { term: "A kliens oldal√°n van probl√©ma, p√©ld√°ul hib√°s k√©r√©s vagy jogosults√°g hi√°nya.", definition: "Mit jelez √°ltal√°ban a 4xx tartom√°ny√∫ st√°tuszk√≥d?" },
      { term: "Szerveroldali hib√°t, amikor a szerver nem tudja helyesen feldolgozni a k√©rv√©nyeket.", definition: "Mit jelez √°ltal√°ban az 5xx tartom√°ny√∫ st√°tuszk√≥d?" },
      { term: "Metaadatok a k√©rd√©sr≈ël √©s v√°laszr√≥l, amelyek seg√≠tik a helyes feldolgoz√°st.", definition: "Mi az a header (fejl√©c), √©s mi√©rt k√ºld a kliens √©s a szerver is header√∂ket?" },
      { term: "A k√ºld√∂tt vagy kapott adatok tartalma, ha a k√©r√©s vagy v√°lasz adatot hordoz.", definition: "Mi az a t√∂rzs (body) egy k√©r√©sben vagy v√°laszban, √©s mikor haszn√°ljuk?" },
      { term: "K√∂nnyen olvashat√≥ sz√∂veges adatcsere form√°tum kulcs-√©rt√©k p√°rokkal.", definition: "Mi a JSON form√°tum l√©nyege, √©s mi√©rt kedvelt adatcsere a weben?" },
      { term: "Amikor fejlettebb be√°ll√≠t√°sokra van sz√ºks√©g √©s nem csak GET k√©r√©st akarunk k√ºldeni.", definition: "Mi√©rt lehet kev√©s egy b√∂ng√©sz≈ë, √©s mikor √©rdemes API tesztel≈ë eszk√∂zt haszn√°lni?" },
      { term: "API k√©rd√©sek k√ºld√©se, v√°laszok elemz√©se √©s automatiz√°lt tesztel√©s seg√≠t√©se.", definition: "Mi a Postman els≈ëdleges szerepe a fejleszt√©sben √©s tanul√°sban?" },
      { term: "Rendszerezhetj√ºk a k√©rv√©nyeket √©s k√∂nnyen √∫jrafelhaszn√°lhatjuk ≈ëket.", definition: "Miben seg√≠t, hogy a Postmanben k√ºl√∂n menthet≈ë k√©r√©sek √©s gy≈±jtem√©nyek vannak?" },
      { term: "K√ºl√∂n be√°ll√≠t√°sokat tarthatunk fejleszt√©shez, teszthez √©s √©leshez, √©s k√∂nnyen v√°ltogathatunk k√∂zt√ºk.", definition: "Mi a haszna a Postman k√∂rnyezeteinek, √©s hogyan k√∂nny√≠tik meg a v√°lt√°skor a munk√°t?" },
      { term: "V√°ltoz√≥kba tehetj√ºk az ismert r√©szeket, p√©ld√°ul a b√°zis URL-t, √≠gy kev√©sb√© kell √°t√≠rni mindent.", definition: "Mire j√≥k a Postman k√∂rnyezeti v√°ltoz√≥i, √©s hogyan n√∂velik az √∫jrahaszn√°lhat√≥s√°got?" },
      { term: "M√°s n√©zetek seg√≠tenek az √°ttekint√©sben √©s a hib√°k megtal√°l√°s√°ban.", definition: "Mi√©rt hasznos a Postmanben a v√°lasz megjelen√≠t√©se k√ºl√∂nb√∂z≈ë n√©zetekben?" },
      { term: "Teljes√≠tm√©ny √©s adatforgalom szempontb√≥l fontos visszajelz√©s a rendszerr≈ël.", definition: "Mi√©rt √©rdemes a Postmanben figyelni a k√©r√©s idej√©t √©s a v√°lasz m√©ret√©t?" },
      { term: "Automatikusan ellen≈ërizhetj√ºk, hogy a v√°lasz megfelel-e az elv√°r√°soknak.", definition: "Mi a c√©lja a Postmanben a tesztek √≠r√°s√°nak, √©s miben seg√≠t tanul√°skor?" },
      { term: "A b√∂ng√©sz≈ë alapvet≈ëen csak lek√©r, a Postman pedig finomhangolhat√≥ param√©terekkel √©s headerekkel k√ºld.", definition: "Mi a k√ºl√∂nbs√©g ak√∂z√∂tt, hogy egy GET k√©r√©st b√∂ng√©sz≈ëb≈ël nyitsz meg, vagy Postmanb√≥l k√ºldesz el?" },
      { term: "A szerver nem ≈ërzi meg a kor√°bbi k√©rd√©sek √°llapot√°t, ez√©rt minden k√©r√©s √∂n√°ll√≥an √©rtelmezhet≈ë.", definition: "Mit jelent, hogy egy API √°llapot n√©lk√ºli (stateless), √©s ez mi√©rt egyszer≈±s√≠ti a tesztel√©st?" },
      { term: "√Åtl√°that√≥bb, egys√©gesebb √©s el≈ërejelezhet≈ë haszn√°latot ad.", definition: "Mi√©rt fontos a konzisztens n√©v √©s √∫tvonalhaszn√°lat az API-kban?" },
      { term: "Egyszer≈± sz≈±r√©shez √©s lapoz√°shoz, amikor nem m√≥dos√≠t√°sr√≥l van sz√≥.", definition: "Mire j√≥k a lek√©rdez√©s param√©terek (query params), √©s mikor v√°lasztan√°d ezeket a body helyett?" },
      { term: "Mert pontosan be√°ll√≠that√≥k a k√©r√©s r√©szletei √©s k√∂vetkezetesen ism√©telhet≈ëek a l√©p√©sek.", definition: "Mit≈ël hat√©kony eszk√∂z a Postman?" },
      { term: "Mert nyomon k√∂vethet≈ë, mi t√∂rt√©nt egy k√©r√©s feldolgoz√°sakor.", definition: "Mi√©rt hasznos a szerver oldalon a napl√≥z√°s √©s a konzol √ºzenetek a hib√°k megtal√°l√°s√°hoz?" },
      { term: "A fejleszt≈ëi k√∂rnyezet k√≠s√©rletez√©sre val√≥, az √©les stabil szolg√°ltat√°sra, ez√©rt k√ºl√∂n kezelj√ºk ≈ëket.", definition: "Mi a k√ºl√∂nbs√©g a fejleszt≈ëi k√∂rnyezet √©s az √©les k√∂rnyezet k√∂z√∂tt, √©s mi√©rt nem ugyanott tesztel√ºnk mindent?" }
    ];

    // Alkalmaz√°s v√°ltoz√≥k
    let currentIndex = 0;
    let questionCounter = 0;
    let isReviewMode = false;
    let reviewCounter = 0;
    let incorrectAnswers = [];
    let learnedTerms = new Set();
    let availableTerms = [];

    // DOM elemek
    const definitionText = document.getElementById('definitionText');
    const optionsContainer = document.getElementById('optionsContainer');
    const dontKnowBtn = document.getElementById('dontKnowBtn');
    const nextQuestionBtn = document.getElementById('nextQuestionBtn');
    const feedbackArea = document.getElementById('feedbackArea');
    const reviewBanner = document.getElementById('reviewBanner');
    const progressFill = document.getElementById('progressFill');
    const learnedCount = document.getElementById('learnedCount');
    const totalCount = document.getElementById('totalCount');

    // Inicializ√°l√°s
    function initApp() {
      initLearningProgress();
      updateProgress();
      generateStudyQuestion();

      nextQuestionBtn.addEventListener('click', handleNextQuestion);
      dontKnowBtn.addEventListener('click', handleDontKnow);
    }

    function initLearningProgress() {
      learnedTerms = new Set();
      availableTerms = [];
      
      for (let i = 0; i < flashcards.length; i++) {
        availableTerms.push(i);
      }
      
      shuffleArray(availableTerms);
      totalCount.textContent = flashcards.length;
    }

    function updateProgress() {
      const learned = learnedTerms.size;
      const total = flashcards.length;
      const percentage = (learned / total) * 100;
      
      learnedCount.textContent = learned;
      progressFill.style.width = percentage + '%';
    }

    function generateStudyQuestion() {
      feedbackArea.innerHTML = '';
      nextQuestionBtn.classList.add('hidden');
      reviewBanner.innerHTML = '';
      
      if (availableTerms.length === 0) {
        if (learnedTerms.size === flashcards.length) {
          showCompletionMessage();
          return;
        }
        resetAvailableTerms();
      }
      
      const randomIndex = Math.floor(Math.random() * availableTerms.length);
      currentIndex = availableTerms[randomIndex];
      const correctAnswer = flashcards[currentIndex].term;

      const options = [correctAnswer];
      while (options.length < 4) {
        const randomTerm = flashcards[Math.floor(Math.random() * flashcards.length)].term;
        if (!options.includes(randomTerm)) {
          options.push(randomTerm);
        }
      }

      shuffleArray(options);

      definitionText.textContent = flashcards[currentIndex].definition;

      const optionButtons = document.querySelectorAll('.optionBtn');
      optionButtons.forEach((btn, index) => {
        btn.textContent = options[index];
        btn.dataset.correct = options[index] === correctAnswer ? 'true' : 'false';
        btn.className = 'optionBtn';
        btn.disabled = false;
        
        btn.removeEventListener('click', handleOptionClick);
        btn.removeEventListener('click', handleReviewOptionClick);
        btn.addEventListener('click', isReviewMode ? handleReviewOptionClick : handleOptionClick);
      });
      
      dontKnowBtn.disabled = false;
    }

    function handleOptionClick(event) {
      const isCorrect = event.target.dataset.correct === 'true';
      const optionButtons = document.querySelectorAll('.optionBtn');

      optionButtons.forEach(btn => {
        btn.disabled = true;
        if (btn.dataset.correct === 'true') {
          btn.classList.add('correct');
        } else if (btn === event.target && !isCorrect) {
          btn.classList.add('incorrect');
          
          const wrongAnswer = {
            index: currentIndex,
            term: flashcards[currentIndex].term,
            definition: flashcards[currentIndex].definition
          };
          incorrectAnswers.push(wrongAnswer);
        }
      });
      
      if (isCorrect) {
        learnedTerms.add(currentIndex);
        availableTerms = availableTerms.filter(index => index !== currentIndex);
        updateProgress();
      }
      
      dontKnowBtn.disabled = true;

      const feedbackMessage = document.createElement('p');
      feedbackMessage.id = 'feedbackMessage';
      feedbackMessage.textContent = isCorrect 
        ? "Sz√©√©√©p! Csak √≠gy tov√°bb! :D" 
        : "No para, ez m√©g nem dolgozat!";
      feedbackMessage.style.color = isCorrect ? 'var(--correct)' : 'var(--incorrect)';
      feedbackArea.appendChild(feedbackMessage);

      nextQuestionBtn.classList.remove('hidden');
    }

    function handleDontKnow() {
      const optionButtons = document.querySelectorAll('.optionBtn');
      
      optionButtons.forEach(btn => {
        btn.disabled = true;
        if (btn.dataset.correct === 'true') {
          btn.classList.add('correct');
        }
      });
      
      dontKnowBtn.disabled = true;
      
      if (!isReviewMode) {
        const wrongAnswer = {
          index: currentIndex,
          term: flashcards[currentIndex].term,
          definition: flashcards[currentIndex].definition
        };
        incorrectAnswers.push(wrongAnswer);
      }
      
      const feedbackMessage = document.createElement('p');
      feedbackMessage.id = 'feedbackMessage';
      feedbackMessage.textContent = 'A helyes v√°lasz: ' + flashcards[currentIndex].term;
      feedbackMessage.style.color = 'var(--primary)';
      feedbackArea.appendChild(feedbackMessage);
      
      nextQuestionBtn.classList.remove('hidden');
    }

    function handleNextQuestion() {
      if (isReviewMode) {
        showNextReviewQuestion();
      } else {
        questionCounter++;
        
        if (questionCounter % 10 === 0 && incorrectAnswers.length > 0) {
          startReviewSession();
        } else {
          if (availableTerms.length === 0 && learnedTerms.size === flashcards.length) {
            showCompletionMessage();
          } else if (availableTerms.length === 0) {
            resetAvailableTerms();
            generateStudyQuestion();
          } else {
            generateStudyQuestion();
          }
        }
      }
    }

    function startReviewSession() {
      isReviewMode = true;
      reviewCounter = 0;
      shuffleArray(incorrectAnswers);
      showNextReviewQuestion();
    }

    function showNextReviewQuestion() {
      if (reviewCounter >= incorrectAnswers.length) {
        isReviewMode = false;
        incorrectAnswers = [];
        generateStudyQuestion();
        return;
      }
      
      feedbackArea.innerHTML = '';
      nextQuestionBtn.classList.add('hidden');
      
      reviewBanner.innerHTML = '<div class="review-banner">üîÑ N√©zz√ºk meg √∫jra</div>';
      
      currentIndex = incorrectAnswers[reviewCounter].index;
      const correctAnswer = flashcards[currentIndex].term;

      const options = [correctAnswer];
      while (options.length < 4) {
        const randomTerm = flashcards[Math.floor(Math.random() * flashcards.length)].term;
        if (!options.includes(randomTerm)) {
          options.push(randomTerm);
        }
      }

      shuffleArray(options);

      definitionText.textContent = flashcards[currentIndex].definition;

      const optionButtons = document.querySelectorAll('.optionBtn');
      optionButtons.forEach((btn, index) => {
        btn.textContent = options[index];
        btn.dataset.correct = options[index] === correctAnswer ? 'true' : 'false';
        btn.className = 'optionBtn';
        btn.disabled = false;
        
        btn.removeEventListener('click', handleOptionClick);
        btn.removeEventListener('click', handleReviewOptionClick);
        btn.addEventListener('click', handleReviewOptionClick);
      });
      
      dontKnowBtn.disabled = false;
      reviewCounter++;
    }

    function handleReviewOptionClick(event) {
      const isCorrect = event.target.dataset.correct === 'true';
      const optionButtons = document.querySelectorAll('.optionBtn');

      optionButtons.forEach(btn => {
        btn.disabled = true;
        if (btn.dataset.correct === 'true') {
          btn.classList.add('correct');
        } else if (btn === event.target && !isCorrect) {
          btn.classList.add('incorrect');
        }
      });
      
      dontKnowBtn.disabled = true;

      const feedbackMessage = document.createElement('p');
      feedbackMessage.id = 'feedbackMessage';
      
      if (isCorrect) {
        feedbackMessage.textContent = "√úgyes vagy, ez√∫ttal eltal√°ltad!";
        feedbackMessage.style.color = 'var(--correct)';
        
        learnedTerms.add(currentIndex);
        updateProgress();
      } else {
        feedbackMessage.textContent = "Nyugi, gyakorolj tov√°bb, meg lesz az!";
        feedbackMessage.style.color = 'var(--incorrect)';
        
        const wrongAnswer = {
          index: currentIndex,
          term: flashcards[currentIndex].term,
          definition: flashcards[currentIndex].definition
        };
        incorrectAnswers.push(wrongAnswer);
      }
      
      feedbackArea.appendChild(feedbackMessage);

      nextQuestionBtn.classList.remove('hidden');
    }

    function resetAvailableTerms() {
      availableTerms = [];
      for (let i = 0; i < flashcards.length; i++) {
        if (!learnedTerms.has(i)) {
          availableTerms.push(i);
        }
      }
      shuffleArray(availableTerms);
    }

    function showCompletionMessage() {
      feedbackArea.innerHTML = '';
      nextQuestionBtn.classList.add('hidden');
      
      const optionButtons = document.querySelectorAll('.optionBtn');
      optionButtons.forEach(btn => btn.style.display = 'none');
      
      dontKnowBtn.style.display = 'none';
      
      const completionMessage = document.createElement('div');
      completionMessage.className = 'completion-message';
      completionMessage.innerHTML = `
        <h2>üéâ Gratul√°lunk!</h2>
        <p>Sikeresen megtanultad az √∂sszes HTTP & API fogalmat!</p>
        <p>Fogalmak sz√°ma: ${flashcards.length}</p>
        <button id="restartBtn" class="btn btn-primary">√öjrakezd√©s</button>
      `;
      document.querySelector('.card').appendChild(completionMessage);
      
      document.getElementById('restartBtn').addEventListener('click', () => {
        completionMessage.remove();
        optionButtons.forEach(btn => btn.style.display = 'flex');
        dontKnowBtn.style.display = 'block';
        initLearningProgress();
        updateProgress();
        generateStudyQuestion();
      });
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    window.onload = initApp;
  </script>
</body>
</html>
